{"version":3,"sources":["helper/fetchWrapper.js","helper/converter.js","pages/Home.js"],"names":["fetchWrapper","get","url","fetch","method","headers","then","handleResponse","post","body","requestOptions","JSON","stringify","put","delete","response","text","data","parse","ok","error","message","statusText","Promise","reject","convertToJson","keys","delim","reduce","initial","current","splitedData","split","obj","acc","key","index","getMaxMin","maxOpen","sort","a","b","open","minOpen","maxHigh","high","minHigh","maxLow","low","minLow","maxClosed","close","minClosed","useStyles","makeStyles","theme","root","gridContainer","marginBottom","paper","padding","spacing","display","justifyContent","alignItems","title","fontSize","fontWeight","margin","values","lineHeight","upArrow","color","purple","downArrow","teal","columns","field","searchable","grouping","sorting","type","align","render","rowData","style","moment","Number","timestamp","format","currencySetting","currencyCode","cellStyle","Home","classes","useState","loading","setLoading","historicalData","setHistoricalData","maxMin","setMaxMin","currentPage","setCurrentPage","useEffect","process","catch","console","className","container","item","xs","sm","left","variant","right","actions","icon","SyncIcon","tooltip","isFreeAction","onClick","event","prevState","options","maxBodyHeight","isLoading"],"mappings":"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","file":"static/js/6.5f701b82.chunk.js","sourcesContent":["export const fetchWrapper = {\n  get,\n  post,\n  put,\n  delete: _delete,\n};\n\nfunction get(url) {\n  const requestOptions = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Encoding\": \"gzip, deflate\",\n    },\n  };\n  return fetch(url, requestOptions).then(handleResponse);\n}\n\nfunction post(url, body) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Encoding\": \"gzip, deflate\",\n    },\n    body: JSON.stringify(body),\n  };\n  return fetch(url, requestOptions).then(handleResponse);\n}\n\nfunction put(url, body) {\n  const requestOptions = {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Encoding\": \"gzip, deflate\",\n    },\n    body: JSON.stringify(body),\n  };\n  return fetch(url, requestOptions).then(handleResponse);\n}\n\n// prefixed with underscored because delete is a reserved word in javascript\nfunction _delete(url) {\n  const requestOptions = {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Encoding\": \"gzip, deflate\",\n    },\n  };\n  return fetch(url, requestOptions).then(handleResponse);\n}\n\n// helper functions\n\nfunction handleResponse(response) {\n  return response.text().then((text) => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      const error = (data && data.message) || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}\n","export const convertToJson = (data, keys, delim = \",\") =>\n  data.reduce((initial, current) => {\n    const splitedData = current.split(delim);\n    const obj = keys.reduce(\n      (acc, key, index) => (acc = { ...acc, [key]: splitedData[index] }),\n      {}\n    );\n    return [...initial, obj];\n  }, []);\n\nexport const getMaxMin = (data) => {\n  let maxOpen = data.sort((a, b) => b.open - a.open)[0],\n    minOpen = data.sort((a, b) => a.open - b.open)[0],\n    maxHigh = data.sort((a, b) => b.high - a.high)[0],\n    minHigh = data.sort((a, b) => a.high - b.high)[0],\n    maxLow = data.sort((a, b) => b.low - a.low)[0],\n    minLow = data.sort((a, b) => a.low - b.low)[0],\n    maxClosed = data.sort((a, b) => b.close - a.close)[0],\n    minClosed = data.sort((a, b) => a.close - b.close)[0];\n\n  return {\n    maxOpen,\n    minOpen,\n    maxHigh,\n    minHigh,\n    maxLow,\n    minLow,\n    maxClosed,\n    minClosed,\n  };\n};\n","import React, { useEffect, useState } from \"react\";\nimport { fetchWrapper, convertToJson, getMaxMin } from \"helper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { AppLoader, DataTable, AppContainer } from \"components\";\nimport moment from \"moment\";\nimport SyncIcon from \"@material-ui/icons/Sync\";\nimport { Grid, Paper, Typography } from \"@material-ui/core\";\nimport ArrowUpwardIcon from \"@material-ui/icons/ArrowUpward\";\nimport ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport teal from \"@material-ui/core/colors/teal\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  gridContainer: {\n    marginBottom: 20,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: 600,\n    margin: \"0 0 20px\",\n  },\n  values: {\n    fontSize: 14,\n    lineHeight: 1.5,\n  },\n  upArrow: {\n    fontSize: 100,\n    color: purple[500],\n  },\n  downArrow: {\n    fontSize: 100,\n    color: teal[500],\n  },\n}));\n\nconst columns = [\n  {\n    title: \"Date\",\n    field: \"timestamp\",\n    searchable: false,\n    grouping: false,\n    sorting: true,\n    type: \"date\",\n    align: \"center\",\n    render: (rowData) => (\n      <p style={{ margin: 0 }}>\n        {moment(Number(rowData.timestamp)).format(\"MMM DD, YYYY\")}\n      </p>\n    ),\n  },\n  {\n    title: \"Open Price\",\n    field: \"open\",\n    searchable: false,\n    grouping: false,\n    sorting: true,\n    type: \"currency\",\n    align: \"center\",\n    currencySetting: { currencyCode: \"INR\" },\n    cellStyle: {\n      padding: 5,\n    },\n  },\n  {\n    title: \"Highest Price\",\n    field: \"high\",\n    searchable: false,\n    grouping: false,\n    sorting: true,\n    type: \"currency\",\n    align: \"center\",\n    currencySetting: { currencyCode: \"INR\" },\n    cellStyle: {\n      padding: 5,\n    },\n  },\n  {\n    title: \"Lowest Price\",\n    field: \"low\",\n    searchable: false,\n    grouping: false,\n    sorting: true,\n    type: \"currency\",\n    align: \"center\",\n    currencySetting: { currencyCode: \"INR\" },\n    cellStyle: {\n      padding: 5,\n    },\n  },\n  {\n    title: \"Closed Price\",\n    field: \"close\",\n    searchable: false,\n    grouping: false,\n    sorting: true,\n    type: \"currency\",\n    align: \"center\",\n    currencySetting: { currencyCode: \"INR\" },\n    cellStyle: {\n      padding: 5,\n    },\n  },\n  {\n    title: \"Remaning Volume\",\n    field: \"volume\",\n    searchable: false,\n    grouping: false,\n    sorting: true,\n    type: \"numeric\",\n    align: \"center\",\n    cellStyle: {\n      padding: 5,\n    },\n  },\n];\n\nconst keys = [\"timestamp\", \"open\", \"high\", \"low\", \"close\", \"volume\"];\n\nfunction Home() {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n  const [historicalData, setHistoricalData] = useState([]);\n  const [maxMin, setMaxMin] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  useEffect(() => {\n    setLoading(true);\n    fetchWrapper\n      .get(`${process.env.REACT_APP_HISTORY_ENDPOINT}?interval=${currentPage}`)\n      .then((response) => {\n        const data = convertToJson(response, keys);\n        setHistoricalData(data);\n        setMaxMin(getMaxMin(data));\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.error(error);\n        setLoading(false);\n      });\n  }, [currentPage]);\n\n  return (\n    <section className={classes.root}>\n      <AppContainer>\n        {maxMin && (\n          <Grid container className={classes.gridContainer} spacing={2}>\n            <Grid item xs={12} sm={6}>\n              <Paper className={classes.paper}>\n                <div className={classes.left}>\n                  <Typography variant=\"h3\" className={classes.title}>\n                    Maximum\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`Open:- ₹${maxMin.maxOpen.open} on ${moment(\n                      Number(maxMin.maxOpen.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`High:- ₹${maxMin.maxHigh.high} on ${moment(\n                      Number(maxMin.maxHigh.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`Low:- ₹${maxMin.maxLow.low} on ${moment(\n                      Number(maxMin.maxLow.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`Close:- ₹${maxMin.maxClosed.open} on ${moment(\n                      Number(maxMin.maxClosed.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                </div>\n                <div className={classes.right}>\n                  <ArrowUpwardIcon className={classes.upArrow} />\n                </div>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <Paper className={classes.paper}>\n                <div className={classes.left}>\n                  <Typography variant=\"h3\" className={classes.title}>\n                    Minimum\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`Open:- ₹${maxMin.minOpen.open} on ${moment(\n                      Number(maxMin.minOpen.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`High:- ₹${maxMin.minHigh.high} on ${moment(\n                      Number(maxMin.minHigh.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`Low:- ₹${maxMin.minLow.low} on ${moment(\n                      Number(maxMin.minLow.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                  <Typography variant=\"h3\" className={classes.values}>\n                    {`Close:- ₹${maxMin.minClosed.open} on ${moment(\n                      Number(maxMin.minClosed.timestamp)\n                    ).format(\"MMM DD, YYYY\")}`}\n                  </Typography>\n                </div>\n                <div className={classes.right}>\n                  <ArrowDownwardIcon className={classes.downArrow} />\n                </div>\n              </Paper>\n            </Grid>\n          </Grid>\n        )}\n\n        <DataTable\n          title=\"Historical Records\"\n          columns={columns}\n          data={historicalData}\n          actions={[\n            {\n              icon: SyncIcon,\n              tooltip: \"Fetch More Records\",\n              isFreeAction: true,\n              onClick: (event) => {\n                setCurrentPage((prevState) => prevState + 1);\n              },\n            },\n          ]}\n          options={{ maxBodyHeight: \"calc(100vh - 430px)\" }}\n        />\n      </AppContainer>\n\n      <AppLoader isLoading={loading} />\n    </section>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}